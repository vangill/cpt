!function(){"use strict";window.jnews=window.jnews||{},window.jnews.splitpost=window.jnews.splitpost||{};var e="object"==typeof jnews&&"object"==typeof jnews.library,t="function"==typeof jnews.tns,n=!!e&&jnews.library,a=function(){if(e){return function(e){var a=function(e,t){var a=this;a.jnewsLibrary=n,a.container=void 0===e?a.jnewsLibrary.globalBody:e,a.splitContainer=a.container.getElementsByClassName("split-container"),a.splitContainer.length&&a.jnewsLibrary.forEach(a.splitContainer,(function(e,t){a.data=null,a.xhr=null,a.xhr_cache=[],a.id=e.dataset.id,a.init()}))};a.DEFAULTS={},a.prototype.init=function(){var e=this;if(void 0!==e.jnewsLibrary.win[e.id]){e.data=e.jnewsLibrary.win[e.id],e.data.index=parseInt(e.data.index),e.menu_drop(),"all"===e.data.mode||"ajax"===e.data.mode?e.mode_load_all():e.mode_normal();var t={popstate:e.popstate.bind(e),jnews_after_split_content_ajax:e.after_ajax.bind(e)};e.jnewsLibrary.addEvents(e.jnewsLibrary.win,t)}},a.prototype.after_ajax=function(){var e=this.container;this.jnewsLibrary.forEach(e.getElementsByClassName("entry-content"),(function(e,t){void 0!==jnews.popup&&jQuery()&&jnews.popup.init(jQuery(e))})),jQuery().jskill&&jQuery(e).find(".jeg_reviewbars").jskill()},a.prototype.menu_drop=function(){var e=this,t=e.container.getElementsByClassName("jeg_splitpost_bar");t.length&&e.jnewsLibrary.forEach(t,(function(n,a){if(n.getElementsByClassName("jeg_splitpost_nav").length){var r=n,i=(r.getElementsByClassName("nav_wrap"),r.getElementsByClassName("jeg_splitpost_nav"),r.getElementsByClassName("current_title"));e.jnewsLibrary.forEach(i,(function(n,a){e.jnewsLibrary.addEvents(n,{click:function(){e.jnewsLibrary.forEach(t,(function(t,n){e.jnewsLibrary.removeClass(t,"nav-open")})),e.jnewsLibrary.addClass(r,"nav-open")}})})),e.jnewsLibrary.addEvents(e.jnewsLibrary.doc,{mouseup:function(t){e.jnewsLibrary.hasClass(r,"nav-open")&&!e.jnewsLibrary.getParents(t.target,".nav_wrap").length>0&&e.jnewsLibrary.removeClass(r,"nav-open")}})}}))},a.prototype.mode_normal=function(){},a.prototype.mode_load_all=function(){var e=this;t?("function"==typeof jnews.tns&&e.jnewsLibrary.forEach(e.container.getElementsByClassName("split-carousel"),(function(t,n){if(!e.jnewsLibrary.hasClass(t,"jeg_tns_active")){var a=!1;"undefined"!=typeof jnewsoption&&(a=1==jnewsoption.rtl),"undefined"!=typeof jnewsgutenbergoption&&(a=1==jnewsgutenbergoption.rtl);var r=jnews.tns({container:t,items:1,controls:!(!e.jnewsLibrary.hasClass(t,"has-nav-content")&&"17"!==e.data.type),controlsText:["",""],nav:!1,gutter:30,loop:!1,startIndex:e.data.index,mouseDrag:!1,autoHeight:!0,textDirection:a?"rtl":"ltr",onInit:function(t){void 0!==t.nextButton&&e.jnewsLibrary.addClass(t.nextButton,"tns-next"),void 0!==t.prevButton&&e.jnewsLibrary.addClass(t.prevButton,"tns-prev"),e.jnewsLibrary.forEach(t.container.getElementsByClassName("split-wrapper"),(function(t,n){var a=t.querySelectorAll(".split-image > img");a.length&&e.jnewsLibrary.getWidth(a)<e.jnewsLibrary.getHeight(a)&&e.jnewsLibrary.addClass(t,"split-half-content")}))}});void 0!==r&&(r.events.on("indexChanged",(function(t){var n=r.getInfo(),a=n.displayIndex,i=(n.indexCached,a-1);null===i&&(i=e.data.index),e.change_slide(i,!0)})),e.jnewsLibrary.addClass(t,"jeg_tns_active"),e.jnewsLibrary.dataStorage.put(t,"tiny-slider",r))}})),e.jnewsLibrary.forEach(e.container.querySelectorAll(".jeg_splitpost_nav a"),(function(t,n){e.jnewsLibrary.addEvents(t,{click:function(t){t.preventDefault();var n=(n=e.jnewsLibrary.getParents(this,".jeg_splitpost_bar")).length?n[n.length-1]:e.jnewsLibrary.doc,a=this.dataset.id;e.change_slide(a,!0)}})})),e.jnewsLibrary.forEach(e.container.querySelectorAll(".jeg_split_pagination .page_number"),(function(t,n){e.jnewsLibrary.addEvents(t,{click:function(t){t.preventDefault();var n=this.dataset.id;e.change_slide(n,!0)}})})),e.jnewsLibrary.forEach(e.container.querySelectorAll(".jeg_split_pagination .page_nav, .jeg_bottomnav .page_nav, .jeg_splitpost_bar .page_nav"),(function(t,n){e.jnewsLibrary.addEvents(t,{click:function(t){t.preventDefault();e.jnewsLibrary.hasClass(this,"prev")?e.change_slide(e.data.index-1,!0):e.change_slide(e.data.index+1,!0)}})}))):console.warn("Tiny Slider could not be found")},a.prototype.popstate=function(e){if(void 0!==e.originalEvent){var t=e.originalEvent.state;t&&"split"===t.type&&this.change_slide(t.id,!1)}},a.prototype.change_slide=function(e,t){var n=this;e<0&&(e=0),e>n.data.max&&(e=n.data.max),e=parseInt(e),n.data.index===e||(n.data.index=parseInt(e),t&&n.change_url(e),n.change_title(e),"all"===n.data.mode?n.change_content(e):n.change_content_ajax(e),n.change_control(e),n.scroll_top(),n.jnewsLibrary.triggerEvents(n.jnewsLibrary.win,"resize"))},a.prototype.scroll_top=function(){var e=this,t=65;null!==e.jnewsLibrary.doc.getElementById("wpadminbar")&&(t+=32),e.jnewsLibrary.forEach(e.container.getElementsByClassName("top-split-nav"),(function(n,a){var r=!!e.jnewsLibrary.dataStorage.has(n,"scrollTo")&&e.jnewsLibrary.dataStorage.get(n,"scrollTo");"object"==typeof r&&r.stop(),e.jnewsLibrary.dataStorage.put(n,"scrollTo",e.jnewsLibrary.scrollTo(n.getBoundingClientRect().top+e.jnewsLibrary.win.scrollY-t,null,500))}))},a.prototype.change_title=function(e){var t=this.data.content[e];this.jnewsLibrary.doc.title=t.page_title},a.prototype.change_url=function(e){var t=this,n=t.data.content[e];n.type="split",history&&history.pushState&&history.pushState(n,"",n.url),t.push_analytic(n.url,t.data.post_id)},a.prototype.change_content=function(e){var t=this;t.jnewsLibrary.forEach(t.container.getElementsByClassName("content-inner"),(function(n,a){t.jnewsLibrary.forEach(n.getElementsByClassName("split-wrapper"),(function(n,a){t.jnewsLibrary.removeClass(n,"active"),void 0!==n.dataset.id&&n.dataset.id===e&&t.jnewsLibrary.addClass(n,"active")}))})),t.jnewsLibrary.forEach(t.container.getElementsByClassName("split-carousel"),(function(n,a){var r=t.jnewsLibrary.dataStorage.get(n,"tiny-slider");"object"==typeof r&&r.goTo(e)}))},a.prototype.cache_get=function(e){for(var t=this,n=JSON.stringify(e),a=0;a<t.xhr_cache.length;a++)if(t.xhr_cache[a].param==n)return t.xhr_cache[a].result;return!1},a.prototype.cache_save=function(e,t){var n=JSON.stringify(e);this.xhr_cache.push({param:n,result:t})},a.prototype.process_content_ajax=function(e,t){var n=this;n.jnewsLibrary.forEach(n.container.querySelectorAll(".content-inner .split-wrapper"),(function(e,a){e.innerHTML=t,n.jnewsLibrary.removeClass(e,"loading")})),n.cache_save(e,t),n.jnewsLibrary.triggerEvents(n.jnewsLibrary.doc,"jnews_after_split_content_ajax",{data:n.container.querySelectorAll(".content-inner .split-wrapper")})},a.prototype.change_content_ajax=function(e){var t=this,n={index:e,"split-post":!0},a=new FormData;for(var r in n)a.append(r,n[r]);t.jnewsLibrary.forEach(t.container.querySelectorAll(".content-inner .split-wrapper"),(function(e,n){t.jnewsLibrary.addClass(e,"loading")}));var i=t.cache_get(n);i?t.process_content_ajax(n,i):(t.xhr=new XMLHttpRequest,t.xhr.onreadystatechange=function(){XMLHttpRequest.DONE===t.xhr.readyState&&200==t.xhr.status&&t.process_content_ajax(n,t.xhr.responseText)},t.xhr.open("POST",t.jnewsLibrary.win.location.origin+t.jnewsLibrary.win.location.pathname+t.jnewsLibrary.win.location.search,!0),t.xhr.send(a))},a.prototype.push_analytic=function(e,t){window.jnews&&window.jnews.ajax_analytic&&jnews.ajax_analytic.update(e,t)},a.prototype.change_control=function(e){var t=this,n=null,a=null,r=t.data.content[e];t.jnewsLibrary.forEach(t.container.getElementsByClassName("jeg_splitpost_bar"),(function(n,a){var r=n.querySelectorAll(".jeg_splitpost_nav li");r.length&&(t.jnewsLibrary.forEach(r,(function(e,n){t.jnewsLibrary.removeClass(e,"current")})),t.jnewsLibrary.addClass(r[e],"current"))})),t.change_nav_text(e);var i=t.data.page_text.replace("{page}",r.page);t.jnewsLibrary.forEach(t.container.querySelectorAll(".jeg_split_pagination .page_info"),(function(e,t){e.innerText&&(e.innerText=i),e.textContent&&(e.textContent=i)})),t.jnewsLibrary.forEach(t.container.querySelectorAll(".jeg_split_pagination .nav_link .page_number"),(function(n,a){t.jnewsLibrary.removeClass(n,"active"),e==n.dataset.id&&t.jnewsLibrary.addClass(n,"active")})),t.jnewsLibrary.forEach(t.container.querySelectorAll(".jeg_split_pagination .page_nav"),(function(n,a){t.jnewsLibrary.removeClass(n,"disabled"),0==e&&t.jnewsLibrary.hasClass(n,"prev")&&t.jnewsLibrary.addClass(n,"disabled"),e==t.data.max&&t.jnewsLibrary.hasClass(n,"next")&&t.jnewsLibrary.addClass(n,"disabled")})),t.jnewsLibrary.forEach(t.container.querySelectorAll(".jeg_bottomnav .page_nav"),(function(n,a){t.jnewsLibrary.removeClass(n,"hide"),0==e&&t.jnewsLibrary.hasClass(n,"prev")&&t.jnewsLibrary.addClass(n,"hide"),e==t.data.max&&t.jnewsLibrary.hasClass(n,"next")&&t.jnewsLibrary.addClass(n,"hide")})),e>0&&(n=t.data.content[e-1],t.jnewsLibrary.forEach(t.container.querySelectorAll(".jeg_bottomnav .page_nav.prev a"),(function(e,t){e.setAttribute("href",n.url)})),t.jnewsLibrary.forEach(t.container.querySelectorAll(".jeg_bottomnav .page_nav.prev strong"),(function(e,a){e.innerText=t.decode_string(n.title),e.textContent=t.decode_string(n.title)}))),e<t.data.max&&(a=t.data.content[e+1],t.jnewsLibrary.forEach(t.container.querySelectorAll(".jeg_bottomnav .page_nav.next a"),(function(e,t){e.setAttribute("href",a.url)})),t.jnewsLibrary.forEach(t.container.querySelectorAll(".jeg_bottomnav .page_nav.next strong"),(function(e,n){e.innerText=t.decode_string(a.title),e.textContent=t.decode_string(a.title)}))),t.jnewsLibrary.forEach(t.container.querySelectorAll(".jeg_splitpost_bar .page_nav"),(function(e,n){t.jnewsLibrary.removeClass(e,"disable")})),e>0&&(n=t.data.content[e-1],t.jnewsLibrary.forEach(t.container.querySelectorAll(".jeg_splitpost_bar .page_nav.prev a"),(function(e,t){e.setAttribute("href",n.url)}))),e<t.data.max&&(a=t.data.content[e+1],t.jnewsLibrary.forEach(t.container.querySelectorAll(".jeg_splitpost_bar .page_nav.next a"),(function(e,t){e.setAttribute("href",a.url)}))),0==e&&t.jnewsLibrary.forEach(t.container.querySelectorAll(".jeg_splitpost_bar .page_nav.prev"),(function(e,n){t.jnewsLibrary.addClass(e,"disable"),t.jnewsLibrary.forEach(e.querySelectorAll("a"),(function(e,t){e.setAttribute("href","#")}))})),e==t.data.max&&t.jnewsLibrary.forEach(t.container.querySelectorAll(".jeg_splitpost_bar .page_nav.next"),(function(e,n){t.jnewsLibrary.addClass(e,"disable"),t.jnewsLibrary.forEach(e.querySelectorAll("a"),(function(e,t){e.setAttribute("href","#")}))}))},a.prototype.decode_string=function(e){return(new DOMParser).parseFromString("<!doctype html><body>"+e,"text/html").body.textContent},a.prototype.change_nav_text=function(e){var t=this,n=t.data.content[e],a="<span class='pagenum'>"+n.page+".</span> "+n.title;t.jnewsLibrary.forEach(t.container.querySelectorAll(".jeg_splitpost_bar .current_title"),(function(e,t){e.innerHTML=a}))};var r=e,i=n.extend({},a.DEFAULTS,r.dataset),s=!!n.dataStorage.has(r,"jeg.split")&&n.dataStorage.get(r,"jeg.split");s||n.dataStorage.put(r,"jeg.split",s=new a(e,i))}}e||console.warn("JNews Library could not be found")}();window.jnews.splitpost=a,e&&("createEvent"in n.doc?n.addEvents(n.doc,{DOMContentLoaded:function(){jnews.splitpost(n.globalBody)}}):"fireEvent"in n.doc&&n.addEvents(n.doc,{readystatechange:function(){"complete"===n.doc.readyState&&jnews.splitpost(n.globalBody)}}))}();