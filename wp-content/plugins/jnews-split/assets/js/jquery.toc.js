!function(t){"use strict";t((function(){window.jnews.split_toc=window.jnews.split_toc||{},window.jnews.split_toc={init:function(){var e=this;e.container=t("body"),e.window_width=t(window).width(),e.sidefeed_width=t("#jeg_sidecontent").width(),e.admin_bar_height="1"===jnewsoption.admin_bar?t("#wpadminbar").outerHeight():0,e.table=e.container.find(".jeg.table-of-contents"),e.table_spacer=e.container.find(".jeg.table-of-contents-spacer"),e.table_links=e.container.find(".toc-wrapper-item-wrap li a"),e.table_height=e.table.outerHeight(),e.floating_table=e.container.find(".jeg.table-of-contents-floating"),e.floating_bar=e.floating_table.find(".floating-bar"),e.floating_icon=e.floating_bar.find("i"),e.scroll(),e.clicked(),e.scroll_top()},scroll:function(){var e=this,o={},i=t(".split-postlist .current_title .pagenum"),a=e.floating_table.find(".floating-navigation"),n=(window.pageYOffset||document.documentElement.scrollTop)-(document.documentElement.clientTop||0),l=t(".entry-content").outerHeight()+t(".entry-content").offset().top;a.length<1||(Array.prototype.forEach.call(i,(function(t){o[t.id]=Math.floor(t.getBoundingClientRect().top+n)-100})),o=(o=Object.entries(o)).sort(((t,e)=>t[1]-e[1])),t(window).on("scroll",(function(){var i=(window.pageYOffset||document.documentElement.scrollTop)-(document.documentElement.clientTop||0),s=t(".jeg.table-of-contents.floating.expanded");if(e.floating_table.removeClass("show"),o.length>0){var c=null;if(i<o[0][1]&&(e.floating_table.removeClass("expanded"),s.removeClass("floating expanded"),e.table_spacer.css("height",0),e.table.css("display",""),e.floating_icon.removeClass("fa-close"),e.floating_icon.addClass("fa-bars")),i<l){for(var d=0;d<o.length&&i>=o[d][1];d++)c=o[d][0];if(null!=c)for(d=0;d<o.length;d++){var f=t('.jeg.table-of-contents nav a[href*="#'+o[d][0]+'"]').parent(),r=f.find(".toc-wrapper-item-number").text(),_=f.find(".toc-wrapper-item-text").text(),p=20,b=20;o[d][0]==c?(p=jnews.split_toc.float_height(p,n,i),b=jnews.split_toc.float_left(b),f.attr("class","active"),a.html('<a href="#'+o[d][0]+'">'+r+" "+_+"</a>"),a.find("a").on("click",(function(e){e.preventDefault();var o=t(this).attr("href");t([document.documentElement,document.body]).animate({scrollTop:t(".split-container .current_title .pagenum"+o).offset().top},800)})),e.floating_table.addClass("show"),e.floating_table.css("top",p),s.css("top",p),0==jnewsoption.rtl&&(e.floating_table.css("left",b),s.css("left",b))):f.attr("class","")}}else e.floating_table.removeClass("expanded"),s.removeClass("show floating expanded"),e.table_spacer.css("height",0),e.table.css("display",""),e.floating_icon.removeClass("fa-close"),e.floating_icon.addClass("fa-bars")}n=i})))},float_height:function(t,e,o){var i=this,a=t;return i.sticky_desktop=i.container.find(".jeg_header_sticky .jeg_sticky_nav"),i.sticky_mobile=i.container.find(".jeg_navbar_mobile.jeg_sticky_nav"),i.sticky_desktop_height=i.sticky_desktop.outerHeight(),i.sticky_mobile_height=i.sticky_mobile.outerHeight(),i.sticky_desktop_mode=i.sticky_desktop.data("mode"),i.sticky_mobile_mode=i.sticky_mobile.data("mode"),a=t+i.admin_bar_height,i.window_width>1024?"fixed"==i.sticky_desktop_mode?a+=i.sticky_desktop_height:"scroll"!=i.sticky_desktop_mode&&"pinned"!=i.sticky_desktop_mode||e>o&&(a+=i.sticky_desktop_height):i.window_width>768&&i.window_width<=1024?"fixed"==i.sticky_mobile_mode?a+=i.sticky_mobile_height:"scroll"!=i.sticky_mobile_mode&&"pinned"!=i.sticky_mobile_mode||e>o&&(a+=i.sticky_mobile_height):a="",a},float_left:function(t){var e=this,o=t;return e.window_width>1024?o=t+e.sidefeed_width:e.window_width<=768&&(o=""),o},clicked:function(){var t=this;t.floating_bar.on("click",(function(e){e.preventDefault();var o=t.floating_table.css("top"),i=t.floating_table.css("left");t.floating_table.hasClass("expanded")?(t.floating_table.removeClass("expanded"),t.table.removeClass("floating expanded"),t.table.css("left",i),t.table.css("top",""),t.table.css("display",""),t.table_spacer.css("height",0),t.floating_icon.removeClass("fa-close"),t.floating_icon.addClass("fa-bars")):(t.floating_table.addClass("expanded"),t.table.addClass("floating expanded"),t.floating_icon.removeClass("fa-bars"),t.floating_icon.addClass("fa-close"),0==jnewsoption.rtl?t.table.css("left",i):t.table.css("left",""),t.window_width>768?(t.table.css("top",o),t.table.css("bottom",""),t.table.css("left",i)):(t.table.css("top",""),t.table.css("bottom",0),t.table.css("left","")),"floating"==t.table.data("type")?(t.table_spacer.css("height",0),t.table.css("display","flex")):t.table_spacer.css("height",t.table_height))}))},scroll_top:function(){this.table_links.each((function(){t(this).on("click",(function(e){e.preventDefault();var o=t(this).attr("href");t([document.documentElement,document.body]).animate({scrollTop:t(".split-container .current_title .pagenum"+o).offset().top},800)}))}))}},jnews.split_toc.init()}))}(jQuery);